# EC2 인스턴스 스토리지

---

## 1. EBS 개요

### EBS 볼륨이란
- EBS(Elastic Block Store) Volume: 인스턴스가 실행 중인 동안 연결 가능한 네트워크 드라이브
- EBS 볼륨을 사용하면 인스턴스가 종료된 후에도 데이터를 지속할 수 있음, 이전 EBS 볼륨을 마운트하면 데이터를 다시 받을 수 있음
- CCP 레벨: 하나의 EBS는 하나의 EC2 인스턴스에만 마운트 가능
- Associate 레벨: 일부 EBS 다중 연결
- EBS 볼륨을 생성할 때는 특정 가용 영역에서만 가능: us-east-1a에서 생성된 경우 us-east-1b는 연결이 불가능
- 스냅샷을 이용하면 다른 가용 영역으로도 볼륨을 옮길 수 있음
- 네트워크 USB 스틱, 한 컴퓨터에서 꺼내, 다른 컴퓨터에 꽂는 장치(네트워크를 통해 연결)
- 프리티어: 매달 30GB EBS 스토리지 범용 SSD 혹은 마그네틱 유형으로 제공됨
- 인스턴스와 EBS 볼륨이 서로 통신을 하기 위해서는 네트워크가 필요 -> 다른 서버에 도달할 때 지연이 생길 수 있음
- 네트워크 드라이브므로 EC2 인스턴스에서 분리될 수 있음
- 용량을 미리 결정해야 함(원하는 양의 GB, IOPS 단위 초당 전송 수를 미리 지정해야 함 -> 해당 프로비전 용량에 따라 요금이 청구
- 더 좋은 성능이나 큰 사이즈가 필요하면 이후에 용량을 늘릴 수도 있음

![image](https://github.com/seonwook97/Certificate/assets/92377162/bbf2e6b2-5747-442b-822f-e34b80c74d20)

### EBS 종료 시 삭제 속성 -> 시험 출제 가능성 ↑

![image](https://github.com/seonwook97/Certificate/assets/92377162/7cdf3489-f61f-4018-98f8-347e0a7c40a2)

- 콘솔에서 EBS 볼륨을 생성하면 끝에서 두 번째 열에 종료 시 삭제 옵션이 있음
- 루트 볼륨에만 체크가 되어있고 새로운 EBS 볼륨에는 체크가 안되어 있음 -> 기본적으로 인스턴스 종료와 함께 삭제되도록 설정 되어 있음
- 인스턴스가 종료될 때 루트 볼륨을 유지하고자 하는 경우, 데이터를 저장하고자 하는 등의 경우에는 루트 볼륨의 종료 시 삭제 속성을 비활성화 하면 됨

---

## 2. EBS Multi-Attach 정보(SAA 과정)

### EBS 다중 연결(Multi-Attach) 정보
- io1, io2 볼륨 타임에서 연결이 가능함

---

## 3. EBS 스냅샷 개요
- 원하는 시점에 대한 백업 -> 해당 EBS 볼륨이 추후 삭제된다고 해도 해당 백업을 통해 복구
- 백업 생성을 위해 백업 전 볼륨을 분리시킬 필요는 없으나 분리를 권장함
- 여러 가용 영역과 리전 간 복제에도 쓸 수 있음
- 글로벌 인프라 활용을 위해 나의 데이터 일부를 AWS 내의 다른 리전으로 전송할 수 있음

    ![image](https://github.com/seonwook97/Certificate/assets/92377162/052362e0-95fe-4557-a656-90c4a304f316)
    - US-EAST-1A -> US-EAST-1B
        - EBS 볼륨에 대한 스냅샷을 만들어 전송
        - EBS 스냅샷이 리전 내에 있어 해당 EBS 스냅샷을 다른 가용 영역에 대해 새 EBS 볼륨 복구 시 사용할 수 있음
        - 복구작업이 끝나면 새 EBS 볼륨을 US-EAST-1B의 EC2 인스턴스에 연결하면 됨 
    - 서로 다른 가용 영역 간에 스냅샷을 통해 성공적이며 효과적으로 EBS 볼륨을 전송할 수 있음

### 3-1. EBS 스냅샷 특성
- EBS 스냅샷 아카이브
    - 스냅샷을 또 다른 스토리지 티어인 '아카이브 티어'로 옮길 수 있음(비용이 75% 저렴)
    - 설정한 방법에 따라서 아카이브 티어로 스냅샷을 옮길 수 있음
    - 아카이브로부터 스냅샷을 복구하는 데에 24~72시간이 소요
        - 급히 복구할 만큼의 중요도가 높지 않은 스냅샷이어야 함(비용을 낮추는 목적)
    
    ![image](https://github.com/seonwook97/Certificate/assets/92377162/67a124d2-2528-4273-97aa-0476975d1a1e)

- EBS 스냅샷 휴지통
    - 기본적으로 스냅샷을 삭제하면 다시 복구할 수 없음
    - 휴지통을 설정해 두면 삭제한 모든 스내샷이 휴지통에 보관됨
    - 설정기간(하루~1년 사이)에 따라 스냅샷이 휴지통에서 삭제됨

    ![image](https://github.com/seonwook97/Certificate/assets/92377162/9c7c500b-dc1d-4089-9658-af38ccc9e2f4)